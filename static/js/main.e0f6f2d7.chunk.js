(this["webpackJsonpmessaging-app"]=this["webpackJsonpmessaging-app"]||[]).push([[0],{20:function(e,t,s){},22:function(e,t,s){},23:function(e,t,s){},24:function(e,t,s){},25:function(e,t,s){},26:function(e,t,s){},27:function(e,t,s){},31:function(e,t,s){"use strict";s.r(t),s.d(t,"client",(function(){return E}));var a=s(2),c=s(3),n=s(5),i=s(4),r=s(1),o=s.n(r),l=s(11),d=s(6),u=s(7),p=(s(20),s.p+"static/media/back.33fe6cf2.svg"),h=s(0),j=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).sendMessage=function(){var e=c.state.data,t=[];if(""!==c.MESSAGEINPUT.current.value){t.push(c.MESSAGEINPUT.current.value),t.push(c.props.userid[0]),e.push(t);var s=c.MESSAGEINPUT.current.value;console.log(s),c.setState({data:e}),c.MESSAGEINPUT.current.value="",c.MESSAGEBODY.current.scroll({top:c.MESSAGEBODY.current.scrollHeight,behavior:"smooth"}),c.addMessage(s)}},c.getData=Object(u.a)(Object(d.a)().mark((function e(){var t;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({code:"C04",id:[c.props.userid[0],c.props.active[0]]}),E.send(t);case 2:case"end":return e.stop()}}),e)}))),c.addMessage=function(){var e=Object(u.a)(Object(d.a)().mark((function e(t){var s;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=JSON.stringify({code:"C05",id:[c.props.userid[0],c.props.active[0]],message:[t,c.props.userid[0]]}),console.log(s),E.send(s);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.setMessage=function(){var e=1;return c.state.data.map((function(t){return e++,Object(h.jsx)(b,{text:t[0],size:t[1],active:c.props.active,userid:c.props.userid},e)}))},c.state={data:[["Hello",0],["How are You?",0],["Hi!!",1]],username:"Loading...."},c.MESSAGEINPUT=o.a.createRef(),c.MESSAGEBODY=o.a.createRef(),c}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"message-box",children:[Object(h.jsx)("button",{className:"back-button-message-box",onClick:function(){e.props.phase(2)},children:Object(h.jsx)("img",{src:p,width:"30px"})}),Object(h.jsxs)("div",{className:"message-header",children:[Object(h.jsx)("div",{className:"image-box"}),Object(h.jsxs)("div",{className:"data-box",children:[Object(h.jsx)("div",{className:"message-title",children:this.props.active[1]}),Object(h.jsx)("div",{className:"message-details",children:this.props.active[0]})]})]}),Object(h.jsx)("div",{className:"message-line"}),Object(h.jsx)("div",{className:"message-body",ref:this.MESSAGEBODY,children:this.setMessage()}),Object(h.jsx)("div",{className:"message-line"}),Object(h.jsxs)("div",{className:"message-send",children:[Object(h.jsx)("input",{className:"message-input",ref:this.MESSAGEINPUT,placeholder:"Enter Message"}),Object(h.jsx)("button",{className:"message-button",onClick:this.sendMessage,children:"SEND"})]})]})})}},{key:"componentDidMount",value:function(){var e=this;E.onmessage=function(t){var s=JSON.parse(t.data);if(console.log(s),"S04"==s.code){var a=s.data;a.shift(),e.setState({data:a})}},document.getElementsByClassName("message-input")[0].addEventListener("keydown",(function(t){"Enter"===t.key&&e.sendMessage()})),this.getData(),console.log(this.props.userid),console.log(this.props.active)}}]),s}(o.a.Component),b=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).state={},c}return Object(c.a)(s,[{key:"render",value:function(){return this.props.size===this.props.active[0]?Object(h.jsx)("div",{className:"message-left",children:Object(h.jsx)("span",{children:this.props.text})}):this.props.size===this.props.userid[0]?Object(h.jsx)("div",{className:"message-right",children:Object(h.jsx)("span",{children:this.props.text})}):void 0}}]),s}(o.a.Component),m=(s(22),function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).sendData=Object(u.a)(Object(d.a)().mark((function e(){var t,s,a;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.BUTTON.current.setAttribute("disabled",""),t=c.EMAIL.current.value,s=c.PASSWORD.current.value,a=JSON.stringify({code:"C01",email:t,password:s}),E.send(a),console.log("SENT DATA");case 6:case"end":return e.stop()}}),e)}))),c.state={notice:""},c.EMAIL=o.a.createRef(),c.PASSWORD=o.a.createRef(),c.BUTTON=o.a.createRef(),c}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"message-box",children:[Object(h.jsx)("div",{className:"heading",children:"Sign In"}),Object(h.jsx)("input",{type:"text",placeholder:"Enter Email",ref:this.EMAIL,className:"main-input"}),Object(h.jsx)("input",{type:"password",placeholder:"Enter Password",ref:this.PASSWORD,className:"main-input"}),Object(h.jsx)("a",{href:"#",className:"forgot",children:"Forgot Password?"}),Object(h.jsx)("div",{className:"message-line"}),Object(h.jsx)("button",{ref:this.BUTTON,className:"main-button",onClick:this.sendData,children:"Login"}),Object(h.jsx)("div",{className:"notice",children:this.state.notice}),Object(h.jsxs)("div",{className:"details",children:["Not a member?",Object(h.jsx)("button",{onClick:function(){e.props.phase(1)},children:"SignUp"})]})]})})}},{key:"componentDidMount",value:function(){var e=this;console.log("LISTENING FOR RESPONSE"),E.onmessage=function(t){var s=JSON.parse(t.data);console.log(s),"S01"==s.code&&("CONN_ACCEPTED"==s.status?(e.props.id([s.id,s.username,"test@gmail.com"]),e.props.phase(2)):"NULL"==s.status&&console.log("ERROR"),e.setState({notice:"Invalid Username or Password!"}),e.BUTTON.current.removeAttribute("disabled"))}}}]),s}(o.a.Component)),O=(s(23),function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this)).sendData=Object(u.a)(Object(d.a)().mark((function e(){var t,s,a,n,i,r;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.BUTTON.current.setAttribute("disabled",""),c.setState({notice:""}),t=c.FIRSTNAME.current.value+" "+c.LASTNAME.current.value,s=c.PASSWORD1.current.value,a=c.PASSWORD2.current.value,n=c.EMAIL.current.value,i=function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},""!==s&&""!==a&&""!==n&&""!==c.FIRSTNAME.current.value&&""!==c.LASTNAME.current.value){e.next=11;break}return c.setState({notice:"Please fill the required fields."}),c.BUTTON.current.removeAttribute("disabled"),e.abrupt("return",0);case 11:if(i(n)){e.next=16;break}return console.log("ERROR"),c.setState({notice:"Invalid Email Address."}),c.BUTTON.current.removeAttribute("disabled"),e.abrupt("return",0);case 16:if(s==a){e.next=21;break}return console.log("ERROR"),c.setState({notice:"Both Passwords Do Not Match."}),c.BUTTON.current.removeAttribute("disabled"),e.abrupt("return",0);case 21:r=JSON.stringify({code:"C02",username:t,password:s,email:n}),E.send(r),console.log("SENT DATA");case 24:case"end":return e.stop()}}),e)}))),c.state={notice:""},c.FIRSTNAME=o.a.createRef(),c.LASTNAME=o.a.createRef(),c.EMAIL=o.a.createRef(),c.PASSWORD1=o.a.createRef(),c.PASSWORD2=o.a.createRef(),c.BUTTON=o.a.createRef(),c}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"message-box",children:[Object(h.jsx)("div",{className:"heading",children:"Sign Up"}),Object(h.jsxs)("div",{className:"user-box",children:[Object(h.jsx)("input",{type:"text",placeholder:"First Name",ref:this.FIRSTNAME,className:"user-input"}),Object(h.jsx)("input",{type:"text",placeholder:"Last Name",ref:this.LASTNAME,className:"user-input"})]}),Object(h.jsx)("input",{type:"email",placeholder:"Email",ref:this.EMAIL,className:"main-input"}),Object(h.jsx)("div",{className:"message-line"}),Object(h.jsx)("input",{type:"password",placeholder:"Enter Password",ref:this.PASSWORD1,className:"main-input"}),Object(h.jsx)("input",{type:"password",placeholder:"Confirm Password",ref:this.PASSWORD2,className:"main-input"}),Object(h.jsx)("div",{className:"message-line"}),Object(h.jsx)("button",{ref:this.BUTTON,className:"main-button",onClick:this.sendData,children:"Register"}),Object(h.jsx)("div",{className:"notice",children:this.state.notice}),Object(h.jsxs)("div",{className:"details",children:["Already a member?",Object(h.jsx)("button",{onClick:function(){e.props.phase(0)},children:"SignIn"})]})]})})}},{key:"componentDidMount",value:function(){var e=this;console.log("LISTENING FOR RESPONSE"),E.onmessage=function(t){var s=JSON.parse(t.data);console.log(s),"S02"==s.code&&("REG_ACCEPTED"==s.status?(e.props.id([s.id,s.username,"test@gmail.com"]),e.props.phase(2)):"USER_ERR"==s.status?(e.setState({notice:"Username Already Taken!"}),e.BUTTON.current.removeAttribute("disabled")):"EMAIL_ERR"==s.status&&(e.setState({notice:"Email Already Registered!"}),e.BUTTON.current.removeAttribute("disabled")),e.BUTTON.current.removeAttribute("disabled"))}}}]),s}(o.a.Component)),f=(s(24),s.p+"static/media/bars.4c3e3d9d.svg"),v=s.p+"static/media/search.f7a26ab2.svg",x=(s(9),function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).getData=Object(u.a)(Object(d.a)().mark((function e(){var t;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({code:"C03"}),E.send(t);case 2:case"end":return e.stop()}}),e)}))),c.setItems=function(){return console.log("DATA"+c.state.filtered),c.state.filtered.map((function(e){return Object(h.jsx)(N,{name:e[0],id:e[1],online:e[2],phase:c.props.phase,chat:c.props.chat})}))},c.openSearch=function(){document.getElementById("searchbar").style.right="0%",document.getElementById("shade").style.opacity="0.2"},c.closeSearch=function(){document.getElementById("searchbar").style.right="900%",document.getElementById("shade").style.opacity="0"},c.openMenu=function(){document.getElementById("sidebar").style.left="0%",document.getElementById("shade").style.opacity="0.2"},c.closeMenu=function(){document.getElementById("sidebar").style.left="-70%",document.getElementById("shade").style.opacity="0"},c.searchNames=function(e){var t=c.state.data,s=e.target.value,a=t.filter((function(e){if(e[0].toUpperCase().includes(s.toUpperCase()))return e}));c.setState({filtered:a})},c.openChat=function(){},c.state={data:[],filtered:[]},c}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{id:"contacts",className:"message-box",children:[Object(h.jsx)("div",{id:"shade"}),Object(h.jsxs)("div",{id:"searchbar",className:"contacts-search-bar-container",children:[Object(h.jsx)("img",{src:p,width:"30px",className:"search-bar-back-btn",onClick:this.closeSearch,alt:""}),Object(h.jsx)("input",{className:"contacts-search-bar",placeholder:"Search",id:"search-input",onKeyDown:function(t){e.searchNames(t)}})]}),Object(h.jsxs)("div",{className:"box-above-contacts",children:[Object(h.jsx)("div",{className:"Menu-icon-position",children:Object(h.jsx)("img",{id:"menu-button",src:f,width:"35px"})}),Object(h.jsxs)("div",{id:"sidebar",children:[Object(h.jsx)("div",{className:"contact-profile-pic-sidebar"}),Object(h.jsx)("div",{className:"contact-profile-pic-sidebar-name",children:this.props.userid[1]}),Object(h.jsx)("div",{className:"contact-profile-pic-sidebar-id",children:this.props.userid[0]}),Object(h.jsx)("div",{onClick:function(){e.props.phase(4)},className:"Menu-box-open-items",children:"Profile"}),Object(h.jsx)("div",{className:"message-line-before-contacts-dif"}),Object(h.jsx)("div",{className:"Menu-box-open-items",children:"Contacts"}),Object(h.jsx)("div",{className:"message-line-before-contacts-dif"}),Object(h.jsx)("div",{className:"Menu-box-open-items",children:"New Groups"}),Object(h.jsx)("div",{className:"message-line-before-contacts-dif"}),Object(h.jsx)("div",{className:"Menu-box-open-items",children:"Settings"}),Object(h.jsx)("div",{className:"contact-sidebar-logout",onClick:function(){e.props.phase(0)},children:"Logout"}),Object(h.jsx)("div",{className:"contact-sidebar-div"})]}),Object(h.jsx)("div",{className:"contacts-title-contacts",children:"Contacts"}),Object(h.jsx)("div",{className:"search-icon-position",onClick:this.openSearch,children:Object(h.jsx)("img",{src:v,width:"25px"})})]}),Object(h.jsx)("div",{className:"message-line-before-contacts"}),Object(h.jsx)("div",{className:"contact-list",children:this.setItems()})]})})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.userid[0];this.getData(),E.onmessage=function(s){var a=JSON.parse(s.data);if(console.log(a),"CONTACTS_SENT"==a.status){var c=a.data.filter((function(e){return e[1]!==t}));e.setState({data:c}),e.setState({filtered:c})}},document.getElementById("contacts").addEventListener("click",(function(t){"menu-button"!=t.target.id&&"Menu-box-open-items"!=t.target.className&&"message-button-contacts"!=t.target.className&&"sidebar"!=t.target.id&&e.closeMenu()})),document.getElementById("menu-button").addEventListener("click",(function(t){e.openMenu()}))}}]),s}(o.a.Component)),N=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(a.a)(this,s),t.call(this,e)}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"contacts-box-container",children:[Object(h.jsx)("div",{className:"contact-profile-pic"}),Object(h.jsx)("div",{className:"contact-profile-name",children:this.props.name}),Object(h.jsx)("div",{className:"contact-profile-status",children:this.props.online}),Object(h.jsx)("div",{className:"message-line-after-contacts"}),Object(h.jsx)("button",{className:"message-button-contacts",onClick:function(){e.props.chat([e.props.id,e.props.name]),e.props.phase(3)},children:"Message"})]})}}]),s}(o.a.Component),g=(s(25),function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).backButton=function(){c.props.phase(2)},c.state={data:[]},c}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{id:"contacts",className:"message-box",children:[Object(h.jsx)("button",{onClick:function(){e.props.phase(2)},className:"profile-section-back-button",children:Object(h.jsx)("img",{src:p,width:"30px",alt:""})}),Object(h.jsx)("div",{className:"profile-pic-profile"}),Object(h.jsx)("div",{className:"profile-name-profile",children:this.props.userid[1]}),Object(h.jsx)("div",{className:"profile-id-profile",children:this.props.userid[0]}),Object(h.jsx)("input",{className:"profile-title-profile",type:"text",placeholder:"Say something about your self.."}),Object(h.jsx)("div",{className:"message-line-after-title"}),Object(h.jsx)("div",{className:"profile-email-profile",children:Object(h.jsxs)("span",{children:[" ",this.props.userid[2]]})}),Object(h.jsx)("div",{className:"message-line-after-email"}),Object(h.jsx)("textarea",{className:"profile-bio-profile",placeholder:"Briefly Describe Yourself..."}),Object(h.jsx)("button",{className:"profile-submit-button",onClick:function(){e.props.phase(2)},children:"Save"})]})})}},{key:"componentDidMount",value:function(){}}]),s}(o.a.Component)),S=(s(26),function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(a.a)(this,s),t.call(this,e)}return Object(c.a)(s,[{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{id:"contacts",className:"message-box",children:[Object(h.jsx)("span",{className:"spinner spinner-large spinner-blue spinner-slow"}),Object(h.jsxs)("div",{className:"bolt",children:["BO",Object(h.jsx)("span",{className:"bolt-span-right",children:"LT"})]})]})})}}]),s}(o.a.Component)),E=(s(27),new(s(12).w3cwebsocket)("wss://Algorithm-Test.mtalalmajeed.repl.co/")),y=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(){var e;return Object(a.a)(this,s),(e=t.call(this)).changePhase=function(t){e.setState({phase:t})},e.changeUserId=function(t){e.setState({userid:t},(function(){console.log(e.state.userid)}))},e.openChat=function(t){e.setState({active:t},(function(){}))},e.state={phase:-1,userid:[],active:[]},e}return Object(c.a)(s,[{key:"render",value:function(){return-1===this.state.phase?Object(h.jsx)(S,{}):0===this.state.phase?Object(h.jsx)(m,{phase:this.changePhase,id:this.changeUserId}):1===this.state.phase?Object(h.jsx)(O,{phase:this.changePhase,id:this.changeUserId}):2===this.state.phase?Object(h.jsx)(x,{phase:this.changePhase,chat:this.openChat,userid:this.state.userid}):3===this.state.phase?Object(h.jsx)(j,{phase:this.changePhase,userid:this.state.userid,active:this.state.active}):4===this.state.phase?Object(h.jsx)(g,{phase:this.changePhase,userid:this.state.userid,active:this.state.active}):void 0}},{key:"componentDidMount",value:function(){var e=this.changePhase;E.onopen=function(){e(0)}}}]),s}(o.a.Component);Object(l.createRoot)(document.getElementById("root")).render(Object(h.jsx)(y,{}))}},[[31,1,2]]]);
//# sourceMappingURL=main.e0f6f2d7.chunk.js.map